<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LipoRelief - Für Dani</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;600&display=swap');

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #ffffff; 
            color: #4a4a4a;
            background-image: radial-gradient(#f3e7d3 0.5px, transparent 0.5px);
            background-size: 20px 20px;
            min-height: 100vh;
        }
        h1, h2, h3, .font-serif { font-family: 'Playfair Display', serif; }
        .gold-gradient {
            background: linear-gradient(135deg, #d4af37 0%, #f1d592 50%, #d4af37 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .gold-bg { background: linear-gradient(135deg, #d4af37 0%, #f1d592 50%, #d4af37 100%); }
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid #f1d592;
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.08);
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none; width: 22px; height: 22px;
            background: #d4af37; border-radius: 50%; cursor: pointer;
            border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .animate-fade { animation: fadeIn 0.6s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #f1d592; border-radius: 10px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const FeatherIcon = ({ className }) => (
            <svg className={className} viewBox="0 0 24 24" fill="none" stroke="#d4af37" strokeWidth="1.2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path>
                <line x1="16" y1="8" x2="2" y2="22"></line>
                <line x1="17.5" y1="15" x2="9" y2="15"></line>
            </svg>
        );

        const LipoReliefApp = () => {
            const [activeTab, setActiveTab] = useState('dashboard');
            const [entries, setEntries] = useState(() => JSON.parse(localStorage.getItem('lipo_premium_v2') || '[]'));
            const [meds, setMeds] = useState(() => JSON.parse(localStorage.getItem('lipo_meds_v2') || '[]'));
            const [showLog, setShowLog] = useState(false);
            const [showMedForm, setShowMedForm] = useState(false);

            // Log State
            const [pain, setPain] = useState(5);
            const [rls, setRls] = useState(3);
            const [water, setWater] = useState(2);
            const [sleep, setSleep] = useState(7);
            const [comp, setComp] = useState(8);
            const [note, setNote] = useState('');

            useEffect(() => { localStorage.setItem('lipo_premium_v2', JSON.stringify(entries)); }, [entries]);
            useEffect(() => { localStorage.setItem('lipo_meds_v2', JSON.stringify(meds)); }, [meds]);

            const saveEntry = () => {
                const newEntry = { id: Date.now(), date: new Date().toISOString(), pain, rls, water, sleep, comp, note };
                setEntries([newEntry, ...entries]);
                setShowLog(false);
                setNote('');
            };

            const addMed = (e) => {
                e.preventDefault();
                const name = e.target.medName.value;
                if (!name) return;
                setMeds([...meds, { id: Date.now(), name, taken: false }]);
                setShowMedForm(false);
            };

            const toggleMed = (id) => {
                setMeds(meds.map(m => m.id === id ? { ...m, taken: !m.taken } : m));
            };

            const Dashboard = () => {
                const last = entries[0];
                return (
                    <div className="space-y-6 pb-32 animate-fade">
                        <header className="text-center pt-4">
                            <FeatherIcon className="w-10 h-10 mx-auto mb-1" />
                            <h1 className="text-2xl font-serif tracking-[0.3em] uppercase gold-gradient">LipoRelief</h1>
                            <p className="text-[9px] tracking-[0.4em] text-gray-400 uppercase">Dani's Sanctuary</p>
                        </header>

                        <div className="glass-card rounded-[2rem] p-8 text-center">
                            <h2 className="text-lg font-serif italic mb-4 text-gray-700">Wie fühlst du dich gerade?</h2>
                            <button onClick={() => setShowLog(true)} className="w-full gold-bg text-white py-4 rounded-full font-bold tracking-widest shadow-md active:scale-95 transition">STATUS ERFASSEN</button>
                        </div>

                        <div className="grid grid-cols-2 gap-4">
                            <div className="glass-card p-5 rounded-2xl text-center">
                                <p className="text-[10px] tracking-widest text-gray-400 uppercase mb-1">Schmerz</p>
                                <p className="text-2xl font-serif text-gray-800">{last?.pain || '-'}<span className="text-xs text-gold-500 italic">/10</span></p>
                            </div>
                            <div className="glass-card p-5 rounded-2xl text-center">
                                <p className="text-[10px] tracking-widest text-gray-400 uppercase mb-1">Wasser</p>
                                <p className="text-2xl font-serif text-gray-800">{last?.water || '-'}<span className="text-xs text-gold-500 italic"> L</span></p>
                            </div>
                        </div>

                        <div className="glass-card rounded-[2rem] p-6">
                            <h3 className="text-xs tracking-widest text-gray-400 uppercase mb-4 text-center">Heutige Begleiter</h3>
                            <div className="space-y-3">
                                {meds.map(m => (
                                    <div key={m.id} onClick={() => toggleMed(m.id)} className="flex items-center justify-between p-3 border-b border-gold-100 last:border-0 cursor-pointer">
                                        <span className={`text-sm ${m.taken ? 'line-through text-gray-300' : 'text-gray-600'}`}>{m.name}</span>
                                        <div className={`w-5 h-5 rounded-full border ${m.taken ? 'gold-bg border-transparent' : 'border-gold-300'} flex items-center justify-center`}>
                                            {m.taken && <svg className="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="3" d="M5 13l4 4L19 7"/></svg>}
                                        </div>
                                    </div>
                                ))}
                                <button onClick={() => setShowMedForm(true)} className="w-full text-[10px] tracking-widest text-gold-600 font-bold pt-2 uppercase">+ Hinzufügen</button>
                            </div>
                        </div>
                    </div>
                );
            };

            const Stats = () => {
                const data = [...entries].reverse().slice(-7);
                return (
                    <div className="space-y-8 animate-fade pb-32">
                        <h2 className="text-xl font-serif text-center gold-gradient italic pt-4">Dein Weg zur Leichtigkeit</h2>
                        <div className="glass-card rounded-[2rem] p-8 h-64 flex items-end justify-between gap-3">
                            {data.length > 0 ? data.map(e => (
                                <div key={e.id} className="flex-1 flex flex-col items-center gap-3">
                                    <div className="w-full gold-bg rounded-t-full opacity-70 transition-all duration-1000" style={{ height: `${e.pain * 10}%` }}></div>
                                    <span className="text-[8px] text-gray-400 font-bold uppercase">{new Date(e.date).toLocaleDateString('de-DE', {day: '2-digit'})}</span>
                                </div>
                            )) : <p className="w-full text-center text-gray-400 italic text-sm">Noch keine Spuren im Sand...</p>}
                        </div>
                        {entries.length > 0 && (
                            <div className="glass-card rounded-3xl p-6 text-center italic text-gray-500 text-sm leading-relaxed">
                                {entries[0].pain > 6 ? "Ein schwerer Moment – nimm dir Zeit zum Kühlen und Atmen." : "Deine Disziplin zahlt sich aus. Die Beine fühlen sich heute freier an."}
                            </div>
                        )}
                    </div>
                );
            };

            return (
                <div className="max-w-md mx-auto min-h-screen px-6 relative flex flex-col pb-10">
                    {activeTab === 'dashboard' ? <Dashboard /> : <Stats />}

                    {showLog && (
                        <div className="fixed inset-0 bg-white/98 backdrop-blur-xl z-50 p-8 overflow-y-auto custom-scrollbar">
                            <div className="max-w-sm mx-auto space-y-8 pb-10">
                                <h3 className="text-xl font-serif text-center italic mt-4">Tagebuch der Leichtigkeit</h3>
                                {[
                                    { label: 'Schmerzlevel', val: pain, set: setPain, max: 10, unit: '/10' },
                                    { label: 'Restless Legs', val: rls, set: setRls, max: 10, unit: '/10' },
                                    { label: 'Wasserzufuhr', val: water, set: setWater, max: 5, step: 0.5, unit: ' L' },
                                    { label: 'Kompression', val: comp, set: setComp, max: 24, unit: ' Std' }
                                ].map((s, i) => (
                                    <div key={i} className="space-y-3">
                                        <div className="flex justify-between text-[10px] tracking-widest uppercase text-gray-400">
                                            <span>{s.label}</span>
                                            <span className="text-gold-600 font-bold">{s.val}{s.unit}</span>
                                        </div>
                                        <input type="range" min="0" max={s.max} step={s.step || 1} value={s.val} onChange={(e)=>s.set(e.target.value)} className="w-full h-[2px] bg-gray-100 appearance-none slider" />
                                    </div>
                                ))}
                                <textarea placeholder="Gedanken für heute..." value={note} onChange={(e)=>setNote(e.target.value)} className="w-full p-4 glass-card rounded-2xl text-sm focus:outline-none italic min-h-[100px]" />
                                <div className="flex gap-4">
                                    <button onClick={()=>setShowLog(false)} className="flex-1 py-4 border border-gray-100 rounded-full text-[10px] tracking-widest uppercase">Schließen</button>
                                    <button onClick={saveEntry} className="flex-1 py-4 gold-bg text-white rounded-full text-[10px] tracking-widest font-bold uppercase shadow-lg">Speichern</button>
                                </div>
                            </div>
                        </div>
                    )}

                    {showMedForm && (
                        <div className="fixed inset-0 bg-black/10 backdrop-blur-sm z-50 flex items-center justify-center p-6">
                            <form onSubmit={addMed} className="glass-card w-full max-w-xs rounded-3xl p-8 space-y-6 animate-fade">
                                <h3 className="font-serif italic text-center text-gray-700">Neuer Begleiter</h3>
                                <input name="medName" autoFocus placeholder="Name (z.B. Magnesium)" className="w-full border-b border-gold-200 py-2 text-sm focus:outline-none text-center bg-transparent" />
                                <div className="flex gap-3">
                                    <button type="button" onClick={()=>setShowMedForm(false)} className="flex-1 text-[10px] tracking-widest uppercase text-gray-400">Abbrechen</button>
                                    <button type="submit" className="flex-1 gold-bg text-white py-2 rounded-full text-[10px] font-bold tracking-widest uppercase shadow-md">OK</button>
                                </div>
                            </form>
                        </div>
                    )}

                    <footer className="mt-auto py-8 text-center animate-fade">
                        <p className="text-[10px] font-serif italic text-gray-400 px-6 leading-relaxed">
                            Für Dani – Damit deine Beine endlich so leicht werden, wie du meine Welt machst. ❤️<br/>
                            <span className="mt-2 block font-sans not-italic font-bold tracking-[0.3em] text-gray-300 text-[8px] uppercase">— von deinem Kai —</span>
                        </p>
                    </footer>

                    <nav className="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-md border-t border-gold-50 px-10 py-5 flex justify-around">
                        <button onClick={() => setActiveTab('dashboard')} className={activeTab === 'dashboard' ? 'scale-110 transition' : 'opacity-20'}>
                            <FeatherIcon className="w-6 h-6" />
                        </button>
                        <button onClick={() => setActiveTab('statistics')} className={activeTab === 'statistics' ? 'scale-110 transition' : 'opacity-20'}>
                            <svg className="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="#d4af37" strokeWidth="1.5"><path d="M18 20V10M12 20V4M6 20v-6"/></svg>
                        </button>
                    </nav>
                </div>
            );
        };

        ReactDOM.render(<LipoReliefApp />, document.getElementById('root'));
    </script>
</body>
</html>
